(this["webpackJsonpsliet-techfest-front-end"]=this["webpackJsonpsliet-techfest-front-end"]||[]).push([[0],{21:function(e,t){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(18),r=n.n(c),o=n(5),s=n(3),i=n(2),l=n(12),j="http://api.techfest.com/api/",d=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).data)},u=n(0),b=["component"];var h=function(e){var t=e.component,n=Object(l.a)(e,b);return Object(u.jsx)(s.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return d()&&1===d().user.role?Object(u.jsx)(t,Object(i.a)({},e)):Object(u.jsx)(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},p=["component"],O=function(e){var t=e.component,n=Object(l.a)(e,p);return Object(u.jsx)(s.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return d()?Object(u.jsx)(t,Object(i.a)({},e)):Object(u.jsx)(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))};var m=Object(s.g)((function(e){var t=e.history;return Object(u.jsx)("div",{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/",children:"Home"})}),!d()&&Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/signin",children:"Sign In"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/signup",children:"Sign Up"})})]}),d()&&2===d().user.role&&Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/superadmin/dashboard",children:"Super Admin Dashboard"})}),d()&&2===d().user.role&&Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/superadmin/coordinator",children:"Coordinator"})}),d()&&1===d().user.role&&Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/admin/dashboard",children:"Admin Dashboard"})}),d()&&0===d().user.role&&Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/user/dashboard",children:"User Dashboard"})}),d()&&Object(u.jsx)("li",{children:Object(u.jsx)("span",{onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(j,"/signout"),{method:"GET"}).then((function(e){return console.log("signout success")})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))},children:"Sign out"})})]})})}));var x=function(e){var t=e.title,n=void 0===t?"Home":t,a=e.children;return Object(u.jsxs)("div",{children:[Object(u.jsx)(m,{}),Object(u.jsx)("h1",{children:n}),Object(u.jsx)("div",{children:a})]})};var f=function(){return Object(u.jsxs)(x,{children:[Object(u.jsx)("h1",{children:"Home"}),Object(u.jsx)("p",{children:j})]})},g=n(8),y=n(11);var v=function(){var e=Object(a.useState)({email:"",password:"",didRedirect:!1,error:"",loading:!1}),t=Object(y.a)(e,2),n=t[0],c=t[1],r=n.email,o=n.password,l=n.loading,b=n.didRedirect,h=n.error,p=d().user,O=function(e){return function(t){c(Object(i.a)(Object(i.a)({},n),{},Object(g.a)({error:!1},e,t.target.value)))}},m=function(e){e.preventDefault(),c(Object(i.a)(Object(i.a)({},n),{},{error:!1,loading:!0})),function(e){return fetch("".concat(j,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log("SIGNIN:"+e)}))}({email:r,password:o}).then((function(e){e.error?c(Object(i.a)(Object(i.a)({},n),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){c(Object(i.a)(Object(i.a)({},n),{},{email:"",password:"",error:"",didRedirect:!0}))}))})).catch("Some error Ocuured")};return Object(u.jsxs)(x,{title:"signin page",children:[l&&Object(u.jsx)("h1",{children:"loading"}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"offset-sm-3 col-md-6 text-left",children:Object(u.jsx)("div",{className:"alert alert-danger",style:{display:h?"":"none"},children:h})})}),Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{type:"email",placeholder:"email",value:r,onChange:O("email")}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",placeholder:"password",value:o,onChange:O("password")}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"submit",value:"Submit",onClick:m})]}),b?p&&1===p.role?Object(u.jsx)(s.a,{to:"/admin/dashboard"}):p&&2===p.role?Object(u.jsx)(s.a,{to:"/superadmin/dashboard"}):Object(u.jsx)(s.a,{to:"/user/dashboard"}):d()?Object(u.jsx)(s.a,{to:"/"}):void 0]})};var N=function(){return Object(u.jsx)(x,{title:"Signout page",children:Object(u.jsx)("h1",{children:"Signout works"})})};var S=function(){var e=Object(a.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(y.a)(e,2),n=t[0],c=t[1],r=n.name,s=n.email,l=n.password,d=n.error,b=n.success,h=function(e){return function(t){c(Object(i.a)(Object(i.a)({},n),{},Object(g.a)({error:!1},e,t.target.value)))}},p=function(e){var t;e.preventDefault(),c(Object(i.a)(Object(i.a)({},n),{},{error:!1})),(t={name:r,email:s,password:l},fetch("".concat(j,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?c(Object(i.a)(Object(i.a)({},n),{},{error:e.error,success:!1})):c(Object(i.a)(Object(i.a)({},n),{},{name:"",email:"",error:"",password:"",success:!0}))})).catch(console.log("Error in signup"))};return Object(u.jsxs)(x,{title:"signup page",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"offset-sm-3 col-md-6 text-left",children:Object(u.jsxs)("div",{className:"alert alert-success",style:{display:b?"":"none"},children:["New Account was created successfully!!.Please"," ",Object(u.jsx)(o.b,{to:"/signin",children:"Login Here"})]})})}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"offset-sm-3 col-md-6 text-left",children:Object(u.jsx)("div",{className:"alert alert-danger",style:{display:d?"":"none"},children:d})})}),Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{type:"text",placeholder:"name",onChange:h("name"),value:r}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"email",placeholder:"email",onChange:h("email"),value:s}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",placeholder:"password",onChange:h("password"),value:l}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"submit",value:"Submit",onClick:p})]})]})};var w=function(){return Object(u.jsx)(x,{title:"User Dashboard page",children:"This is User Dashboard"})};var C=function(){return Object(u.jsx)(x,{title:"Admin Dashboard page",children:"This is Admin Dashboard"})},P=n(20),A=n.n(P),D=function(){var e=Object(a.useState)({name:"",lastName:"",email:"",phone:"",dob:new Date,designation:"",collegeName:"",collegeAddress:"",courseEnrolled:"",whatsappPhoneNumber:"",telegramPhoneNumber:"",branchOfStudy:"",yearOfStudy:0,loading:!1,updated:!1,error:""}),t=Object(y.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),o=Object(y.a)(r,2),s=o[0],l=o[1],b=Object(a.useState)(!1),h=Object(y.a)(b,2),p=h[0],O=h[1],m=n.name,f=n.lastName,v=n.email,N=n.phone,S=n.dob,w=n.designation,C=n.collegeName,P=n.collegeAddress,D=n.courseEnrolled,k=n.branchOfStudy,E=n.yearOfStudy,T=n.whatsappPhoneNumber,I=n.telegramPhoneNumber,J=(n.loading,n.updated),U=n.error,Y=d(),H=Y.user,B=Y.token,G=Object(a.useState)(),R=Object(y.a)(G,2),z=R[0],L=R[1],M=function(e,t){(function(e,t){return fetch("".concat(j,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?(c(Object(i.a)(Object(i.a)({},n),{},{error:e.error})),console.log(n)):c(Object(i.a)(Object(i.a)({},n),{},{name:e.name,lastName:e.lastName,email:e.email,phone:e.phone,designation:e.designation,collegeName:e.collegeName,collegeAddress:e.collegeAddress,courseEnrolled:e.courseEnrolled,branchOfStudy:e.branchOfStudy,yearOfStudy:e.yearOfStudy,whatsappPhoneNumber:e.whatsappPhoneNumber,telegramPhoneNumber:e.telegramPhoneNumber,dob:A()(e.dob).format("YYYY-MM-DD")}))}))};Object(a.useEffect)((function(){M(H._id,B),L(H._id)}),[]);var _=function(e){return function(t){return c(Object(i.a)(Object(i.a)({},n),{},Object(g.a)({},e,t.target.value)))}},F=function(e){return function(t){"whatsappPhoneNumber"==e&&(c(1==p?Object(i.a)(Object(i.a)({},n),{},Object(g.a)({},e,"")):Object(i.a)(Object(i.a)({},n),{},Object(g.a)({},e,N))),O(!p)),"telegramPhoneNumber"==e&&(c(1==s?Object(i.a)(Object(i.a)({},n),{},Object(g.a)({},e,"")):Object(i.a)(Object(i.a)({},n),{},Object(g.a)({},e,N))),l(!s))}},q=function(e){e.preventDefault(),c(Object(i.a)(Object(i.a)({},n),{},{error:"",loading:!0,updated:!1})),function(e,t,n){return fetch("".concat(j,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(z,B,{name:m,lastName:f,email:v,phone:N,dob:S,designation:w,collegeName:C,collegeAddress:P,courseEnrolled:D,branchOfStudy:k,yearOfStudy:E,whatsappPhoneNumber:T,telegramPhoneNumber:I}).then((function(e){e.error?c(Object(i.a)(Object(i.a)({},n),{},{error:e.error,loading:!1})):c(Object(i.a)(Object(i.a)({},n),{},{loading:!1,error:"",updated:!0}))})).catch("user not updated")};return Object(u.jsxs)(x,{title:"Profile page",children:["This is profile page",Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{type:"text",placeholder:"Name",value:m,onChange:_("lastName")}),Object(u.jsx)("input",{type:"text",placeholder:"Last Name",value:f,onChange:_("lastName")}),Object(u.jsx)("input",{type:"email",placeholder:"email",value:v,onChange:_("lastName")}),Object(u.jsx)("input",{type:"tel",placeholder:"Phone no.",value:N,onChange:_("phone")}),Object(u.jsx)("input",{type:"tel",placeholder:"whatsapp Phone no.",value:T,onChange:_("whatsappPhoneNumber")}),Object(u.jsx)("input",{type:"checkbox",checked:N==T,onClick:F("whatsappPhoneNumber")})," same as phone",Object(u.jsx)("input",{type:"tel",placeholder:"telegram Phone no.",value:I,onChange:_("telegramPhoneNumber")}),Object(u.jsx)("input",{type:"checkbox",checked:N==I,onClick:F("telegramPhoneNumber")})," same as phone",Object(u.jsx)("input",{type:"text",placeholder:"designation",value:w,onChange:_("designation")}),Object(u.jsx)("input",{type:"date",placeholder:"dob",value:S.toString(),onChange:_("dob")}),Object(u.jsx)("input",{type:"text",placeholder:"College Name",value:C,onChange:_("collegeName")}),Object(u.jsx)("input",{type:"text",placeholder:"College Address",value:P,onChange:_("collegeAddress")}),Object(u.jsx)("input",{type:"text",placeholder:"Course Enrolled",value:D,onChange:_("courseEnrolled")}),Object(u.jsx)("input",{type:"text",placeholder:"branch Of Study",value:k,onChange:_("branchOfStudy")}),Object(u.jsx)("input",{type:"number",min:"1",placeholder:"Year Of Study",value:E,onChange:_("yearOfStudy")}),Object(u.jsx)("input",{type:"submit",value:"update",onClick:q})]}),Object(u.jsx)("div",{className:"alert alert-danger mt-3",style:{display:U?"":"none"},children:Object(u.jsx)("h4",{children:"profile updation failed"})}),Object(u.jsx)("div",{className:"alert alert-success mt-3",style:{display:J?"":"none"},children:Object(u.jsx)("h4",{children:"Profile updated successfully"})})]})},k=["component"];var E=function(e){var t=e.component,n=Object(l.a)(e,k);return Object(u.jsx)(s.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return d()&&2===d().user.role?Object(u.jsx)(t,Object(i.a)({},e)):Object(u.jsx)(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))};var T=function(){return Object(u.jsx)(x,{title:"Super Admin Dashboard page",children:"This is Super Admin Dashboard"})},I=n(21),J=n.n(I);var U=function(){return Object(u.jsx)(o.a,{children:Object(u.jsxs)(s.d,{children:[Object(u.jsx)(s.b,{path:"/",exact:!0,component:f}),Object(u.jsx)(s.b,{path:"/signup",exact:!0,component:S}),Object(u.jsx)(s.b,{path:"/signin",exact:!0,component:v}),Object(u.jsx)(s.b,{path:"/signout",exact:!0,component:N}),Object(u.jsx)(E,{path:"/superadmin/dashboard",exact:!0,component:T}),Object(u.jsx)(E,{path:"/superadmin/coordinator",exact:!0,component:J.a}),Object(u.jsx)(h,{path:"/admin/dashboard",exact:!0,component:C}),Object(u.jsx)(O,{path:"/user/dashboard",exact:!0,component:w}),Object(u.jsx)(O,{path:"/user/dashboard/profile",exact:!0,component:D})]})})};r.a.render(Object(u.jsx)(U,{}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.263b7808.chunk.js.map